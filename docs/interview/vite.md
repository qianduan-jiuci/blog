# vite面试题

## 1. 什么是Vite

**它专注于提供快速的开发体验和优化的构建速度。**

vite是一款打包构建工具由两部分组成

- 一个开发服务器， 开发模式下使用的是esbuild，支持浏览器原生的ES Module，热更新非常快
-  生产模式下：使用的是rollup，



虽然vite的速度要比webpack快的多，但是vite有两个致命的问题

1. 如果模块的预编译没有处理好，那么vite的开发环境他会加载很多js，这会导致页面启动很慢
2. vite的热更新经常不起作用，项目越大，表现得越明显。
3. 开发环境和生产环境不一致的







## 2. vite为什么比webpack快

在启动方面：

webpack dev server在启动的时候，他会把所有的文件都编译一遍，，他需要从入口文件去索引整个项目，编译成一个或者多个单独的js文件，不管模块是否被执行，都要编译和打包进这个bundle里面，随着项目越来越复杂，项目的模块越来越多，打包后的bundle的也就越来越大，打包的速度也就会越来越慢，这个的这个过程是非常耗时的，这就导致项目越来越复杂，启动时间也就会越来越长

而vite在启动的时候，它的编译是预编译，所以它的启动是很快的。由于现代浏览器都支持ESM，会自动的向依赖的模块进行请求，vite充分利用了这一点，这种按需动态的编译方式，极大的缩短了编译时间，项目越复杂，模块越多，vite的优势就越来越明显。

在热更新方面：

当改动了一个模块之后，仅需让浏览器只请求该模块即可，不会像webpack一样，他会把所有的模块都重新编译一遍。

在底层实现上：

vite是基于esbuild预构建的，esbuild是使用go语言编写的，比js编写的打包器预构建要快10-100倍，js跟go语言相比，它实在是太慢了。js的操作一般是毫秒级。go语言的操作，一般是纳秒级。



- `vite` 不需要做全量的打包，这是比 `webpack` 要快的最主要的原因；

- `vite` 在解析模块依赖关系时，利用了 `esbuild`，更快（esbuild 使用 Go 编写，并且比以 JavaScript 编写的打包器预构建依赖快 10-100 倍）；

- `按需加载`；模块之间的依赖关系的解析由浏览器实现。Vite 只需要在浏览器请求源码时进行转换并按需提供源码。根据情景动态导入代码，即只在当前屏幕上实际使用时才会被处理。

- `充分利用缓存`；Vite 利用 HTTP 头来加速整个页面的重新加载（再次让浏览器为我们做更多事情）：源码模块的请求会根据 `304 Not Modified` 进行协商缓存，而依赖模块请求则会通过 `Cache-Control: max-age=31536000,immutable` 进行强缓存，因此一旦被缓存它们将不需要再次请求。





## 3. vite中的依赖预构建

当你首次启动 `vite` 时，Vite 在本地加载你的站点之前预构建了项目依赖。默认情况下，它是自动且透明地完成的。







## 4.  vite对静态资源的处理



## 5.  热更新原理





## 6.  vite中环境变量



## 7.  如何指定vite插件执行的顺序



## 8. 常见的hook有哪些







