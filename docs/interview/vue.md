# vue面试题

## 01.什么是Vue的响应式？

`vue数据响应式设计的初衷是为了实现数据和函数的联动`，当数据发生变化后，该数据的联动函数将会自动运行。

具体在vue的开发中，数据和组件的render函数关联在一起，从而实现了数据变化自动运行render，在感官上就看到了组件的重新渲染。

除了vue自动关联的render函数，其他还有很多适用到vue响应式的场景，比如computed、watch等等，不能仅吧vue的数据响应式想象成和render的关联 


## 02.Vue2和Vue3双向数据绑定的区别？
Vue2和Vue3双向数据绑定的区别，可以理解为Proxy和Object.defineProperty的区别，针对于这两个技术的区别，在js的面试题中提到过了

Proxy拦截对象的所有基本操作，而Object.defineProperty只是众多基本操作中其中一个

既然Vue2中无法拦截数组，当这个数组是个响应式数据的时候，如何实现的响应式?
`vue2中使用的Object.defineProperty无法监听到数组的变化，从而vue2直接改写了数组原型上的方法，其实看着是调用的`push`、`shift`、`unshift`等方法，其实是调用了改写过后的数组方法`
vue3就不需要了，vue3可以拦截整个数组

## 03. 注入
不管是vue2还是vue3，都有注入得概念
注入：将vue中的配置注入到vue实例中，方便使用
- data：和界面相关的数据
- computed：通过计算得到的属性
- methods：方法

## 04. 谈谈对虚拟dom的理解

### 1.什么是虚拟dom？
虚拟dom本质上就是一个普通的js对象，用于描述视图的界面结构。
在vue中，每个组件都有一个render函数，每个render函数都会返回一个虚拟dom，这也就意味着每个组件都对应着一颗虚拟dom树

### 2.为什么需要虚拟dom？
虚拟dom的目的从来都不是为了提升效率，如果说是为了提升效率，那么React Fiber(为了提高虚拟dom的效率)？那么svelte（全篇都没有虚拟dom，都是在操作真实的dom）？
那为什么还要需要虚拟dom呢？
- 框架设计：
> 对于vue、react这种框架来说，用他们的那一套设计方式，就避免不了使用虚拟dom，或者说这是他们比较简单的一种方式（当数据发生改变的时候，理想状态是知晓哪个数据发生了变化，找到与之关联的节点，只需要修改这一个节点就好了，理论上是可以做到的，但实际上特别的负责，特别的困难，因为vue和react都是组件开发，他不知道哪个节点发生了改变，他知道的是哪个组件发生了改变（数据发生变化，该组件的render函数重新执行），然后没办法了，在render函数必须要全量渲染，如果全部渲染成真实的dom，那这个效率是非常夸张的，与其操作真实的dom，不如选个折中的办法，也就有了虚拟dom的诞生（操作js的效率要比操作真实dom要好很多），vue还是比较好的，react再进行全量渲染的时候更夸张，他从根组件开始全量渲染）`也就是说网上说的虚拟dom能提高效率也是在render函数中进行全量渲染的前提下进行的`
- 跨平台：
> 只有浏览器中才有真实dom，想一些原生安卓或者是桌面端，他连dom的概念都没有，为什么vue框架和react框架可以实现一套代码，多端运行，其实就是因为它的虚拟dom只是一个普通的js对象，在别的平台下，其实没有真实dom，但是有虚拟dom，可以照样那些真实组件进行对应，也可以很轻松的实现跨平台

### 3. 虚拟dom是如何转化成真实dom的？
在一个组件实例首次被渲染时候，他会生成虚拟dom树，然后根据虚拟dom树创建真实dom，并把真实dom挂在到页面中合适的位置，此时，每个虚拟dom便会对应一个真实的dom。

如果一个组件收到响应式数据变化的影响，需要重新渲染时，他仍然会调用render函数，创建一个新得虚拟dom树，用新树和旧树对比，通过对比，vue会找到最新更新量，然后只更新必要得虚拟dom节点，这些更新过得虚拟节点，会去修改他们对应得真实dom

这样依赖，就保证了对真实dom达到最小得改动过。


### 4. 模板和虚拟dom得关系
vue框架中有一个compile模块，它主要负责将模板转化成render函数，而render函数调用后将会得到虚拟dom
编译得过程分为两步：
1. 将模板字符串转换成AST（抽象语法树：用一种js树形结构，来描述原始代码）
2. 将AST转化成render函数

如果使用传统的引入方式或者vue-cli的配置中开启了`runtimeCompile:true`. 则编译时间发生在组件第一次加载时，这也称为运行时编译。
如果是在vue-cli的默认配置下，编译发生在打包时，这称之为模板预编译

编译是一个及其耗费性能的操作，预编译可以有效的提高运行时的性能，而且，由于运行的时候已不需要编译，vue-cli在打包时会排除掉vue的compile模块，以减少打包体积

模板的存在，仅仅是为了让开发人员更加方便的书写界面代码
`vue最中运行的时候，需要的是render函数，而不是模板，因此模板中的各种语法，在虚拟dom中是不存在的，他们都会变成虚拟dom的配置`